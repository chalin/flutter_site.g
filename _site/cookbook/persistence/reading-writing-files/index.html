<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reading and Writing Files  - Flutter </title>
  <link rel="shortcut icon" href="/images/favicon.png">
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
  <!-- End Google Tag Manager -->

  
  <meta name="description" content="In some cases, it can be handy to read and write files to disk. This can be used to persist data across app launches or download data from the internet andsave it for later offline use.In order to save files to disk, we'll need to combine the [`path_provider` plugin](https://pub.dartlang.org/packages/path_provider) with...">
  <meta name="keywords" content=" ">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@flutterio">

  <meta property="og:title" content="Reading and Writing Files">
  <meta property="og:url" content="https://flutter.io/cookbook/persistence/reading-writing-files/">
  <meta property="og:description" content="In some cases, it can be handy to read and write files to disk. This can be used to persist data across app launches or download data from the internet andsave it for later offline use.In order to save files to disk, we'll need to combine the [`path_provider` plugin](https://pub.dartlang.org/packages/path_provider) with...">
  
  <meta property="og:image" content="https://flutter.io/images/flutter-logo-sharing.png">

  <link rel="stylesheet" href="/css/lavish-bootstrap.css">
  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Extended" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro%7CRoboto:500,400italic,300,400" rel="stylesheet">
  
  <link rel="canonical" href="https://flutter.io/cookbook/persistence/reading-writing-files/">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67589403-1', 'auto');
    ga('send', 'pageview');
  </script>

  <meta name="google-site-verification" content="HFqxhSbf9YA_0rBglNLzDiWnrHiK_w4cqDh2YD2GEY4" />
</head>


  <body class="">
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


    <div id="overlay-under-drawer"><!-- for the drawer on narrow screens --></div>

    <header class="site-header">
  <div class="container-fluid header-contents">
    <div class="row">
      <div class="col-md-12">
        <i class="fa fa-bars" id="sidebar-toggle-button" aria-hidden="true" style="display:none"></i>
        <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="40" height="40" style="vertical-align:middle">

        <a class="site-title" href="/">Flutter</a>

        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <i class="material-icons-extended">more_vert</i>
          </a>
          <div class="trigger">
            <a class="page-link" href="/docs/">Docs</a>
            <a class="page-link" href="/showcase/">Showcase</a>
            <a class="page-link" href="https://github.com/flutter/flutter">GitHub</a>
            <a class="page-link" href="https://pub.dartlang.org/flutter">Packages</a>
            <a class="page-link" href="/support/">Support</a>
            <form action="/search/" class="nav-searchbox" id="cse-search-box" style="display: inline">
              <input type="hidden" name="cx" value="007067728241810524621:gm6vraqlc8c">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="hidden" name="hl" value="en">
              <input type="search" name="q" id="q" autocomplete="off" placeholder="Search">
            </form>
          </div>
        </nav>
      </div>
    </div> <!-- /.row -->
  </div> <!-- /.container -->
</header>


    <!-- Page Content -->
    <div class="container-fluid contents">
      <!-- Content Row -->
      <div class="row">

        <!-- Sidebar Column -->
        <div id="side-nav-container" class="col-sm-3">
          <ul id="mysidebar" class="nav">

  <li class="sidebar-title">Get started</li>

    <ul class="sidebar-items">
      <li><a href="/get-started/install/">1: Install</a></li>
      <li><a href="/get-started/editor/">2: Configure editor</a></li>
      <li><a href="/get-started/test-drive/">3: Test drive</a></li>
      <li><a href="/get-started/codelab/">4: Write your first app</a></li>
      <li><a href="/get-started/learn-more/">5: Learn more</a></li>
    </ul>

  <li class="sidebar-title">Build UIs</li>

    <ul class="sidebar-items">
      <li><a href="/widgets-intro/">Tour the framework</a></li>
      <li><a href="/widgets/">Widget catalog</a></li>
      <li><a href="/cookbook/">Cookbook</a></li>
      <li><a href="/catalog/samples/">Sample catalog</a></li>
      <li><a href="/codelabs">Codelabs</a></li>
      <li><a href="/tutorials/layout/">Build layouts - Tutorial</a></li>
      <li><a href="/tutorials/interactive/">Add interactivity - Tutorial</a></li>
      <li><a href="/web-analogs/">Flutter for Web devs</a></li>
      <li><a href="/flutter-for-android/">Flutter for Android devs</a></li>
      <li><a href="/flutter-for-ios/">Flutter for iOS devs</a></li>
      <li><a href="/flutter-for-react-native/">Flutter for React Native devs</a></li>
      <li><a href="/flutter-for-xamarin-forms/">Flutter for Xamarin.Forms devs</a></li>
      <li><a href="/gestures/">Gestures</a></li>
      <li><a href="/animations/">Animations</a></li>
      <li><a href="/layout/">Box constraints</a></li>
      <li><a href="/assets-and-images/">Assets and images</a></li>
      <li><a href="/tutorials/internationalization">Internationalization</a></li>
      <li><a href="/accessibility">Accessibility</a></li>
    </ul>

  <li class="sidebar-title">Use device and SDK APIs</li>

    <ul class="sidebar-items">
      <li><a href="/using-packages/">Using packages</a></li>
      <li><a href="/developing-packages/">Developing packages</a></li>
      <li><a href="/platform-channels/">Platform-specific code</a></li>
      <li><a href="/json/">JSON and serialization</a></li>
      
    </ul>

  <li class="sidebar-title">Development and tools</li>

    <ul class="sidebar-items">
      <li><a href="/using-ide/">Using Flutter IDEs</a></li>
      <li><a href="/hot-reload/">Using hot reload</a></li>
      <li><a href="/testing/">Test your app</a></li>
      <li><a href="/debugging/">Debug your app</a></li>
      <li><a href="/ui-performance/">Performance Profiling</a></li>
      <li><a href="/inspector/">Inspect your UI</a></li>
      <li><a href="/android-release/">Build and release for Android</a></li>
      <li><a href="/ios-release/">Build and release for iOS</a></li>
      <li><a href="/fastlane-cd/">Continuous deployment with Fastlane</a></li>
      <li><a href="/upgrading/">Upgrade your Flutter install</a></li>
      <li><a href="/formatting/">Format your source code</a></li>
    </ul>

  <li class="sidebar-title">More details</li>

    <ul class="sidebar-items">
      <li><a href="/faq/">FAQ</a></li>
      <li><a href="/technical-overview">Technical overview</a></li>
      <li><a href="https://docs.google.com/presentation/d/1B3p0kP6NV_XMOimRV09Ms75ymIjU5gr6GGIX74Om_DE/edit?usp=sharing">Magic of Flutter slides</a></li>
      <li><a href="https://docs.google.com/presentation/d/1cw7A4HbvM_Abv320rVgPVGiUP2msVs7tfGbkgdrTy0I/edit?usp=sharing">Architecture diagrams</a></li>
      <li><a href="https://www.youtube.com/watch?v=dkyY9WCGMi0">Framework's layered design <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
      <li><a href="https://www.youtube.com/watch?v=UUfXWzp0-DU">Flutter's rendering pipeline <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
    </ul>

</ul>

        </div>

        
        

        <!-- Content Column -->
        <div class="col-sm-9 main-contents">
          <div class="main-contents-body">
            <article class="post-content">
  
  
  <header class="post-header">
      <div class="btn-group contribute" role="group">
         <a href="https://github.com/flutter/website/blob/master/cookbook/persistence/reading-writing-files.md" class="btn btn-sm">
            <i class="fa fa-pencil"></i> Edit Source
         </a>
         <a href="https://github.com/flutter/flutter/issues/new?title=Issue from website page Reading and Writing Files&body=From URL: https://flutter.io/cookbook/persistence/reading-writing-files/&labels=dev: docs - website" class="btn btn-sm">
            <i class="fa fa-github"></i> File Issue
        </a>
     </div>
   <div>
    <h1 class="post-title">Reading and Writing Files </h1>
   </div>

  </header>
  

  <p>In some cases, it can be handy to read and write files to disk. This can be 
used to persist data across app launches or download data from the internet and
save it for later offline use.</p>

<p>In order to save files to disk, we’ll need to combine the 
<a href="https://pub.dartlang.org/packages/path_provider"><code class="highlighter-rouge">path_provider</code> plugin</a> with 
the <a href="https://docs.flutter.io/flutter/dart-io/dart-io-library.html"><code class="highlighter-rouge">dart:io</code></a> 
library.</p>

<h2 id="directions">Directions</h2>

<ol>
  <li>Find the correct local path</li>
  <li>Create a reference to the file location</li>
  <li>Write data to the file</li>
  <li>Read data from the file</li>
</ol>

<h2 id="1-find-the-correct-local-path">1. Find the correct local path</h2>

<p>In this example, we’ll display a counter. When the counter changes, we’ll want 
to write data on disk so we can read it again when the app loads. Therefore, we 
need to ask: Where should we store this data?</p>

<p>The <a href="https://pub.dartlang.org/packages/path_provider"><code class="highlighter-rouge">path_provider</code></a> plugin 
provides a platform-agnostic way to access commonly used locations on the 
device’s filesystem. The plugin currently supports access to two filesystem 
locations:</p>

<ul>
  <li><em>Temporary directory:</em> A temporary directory (cache) that the system can 
  clear at any time. On iOS, this corresponds to the value that 
  <a href="https://developer.apple.com/reference/foundation/1409211-nstemporarydirectory"><code class="highlighter-rouge">NSTemporaryDirectory()</code></a> 
  returns. On Android, this is the value that <a href="https://developer.android.com/reference/android/content/Context.html#getCacheDir()"><code class="highlighter-rouge">getCacheDir()</code></a> 
  returns.</li>
  <li><em>Documents directory:</em> A directory for the app to store files that only 
  it can access. The system clears the directory only when the app is deleted. 
  On iOS, this corresponds to <code class="highlighter-rouge">NSDocumentDirectory</code>. On Android, this is the 
  <code class="highlighter-rouge">AppData</code> directory.</li>
</ul>

<p>In our case, we’ll want to store information in the documents directory! We
can find the path to the documents directory like so:</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="n">Future</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="kd">get</span> <span class="n">_localPath</span> <span class="n">async</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">directory</span> <span class="o">=</span> <span class="n">await</span> <span class="n">getApplicationDocumentsDirectory</span><span class="o">();</span>
  
  <span class="k">return</span> <span class="n">directory</span><span class="o">.</span><span class="na">path</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="2-create-a-reference-to-the-file-location">2. Create a reference to the file location</h2>

<p>Once we know where to store the file, we’ll need to create a reference to the 
file’s full location. We can use the <a href="https://docs.flutter.io/flutter/dart-io/File-class.html"><code class="highlighter-rouge">File</code></a> 
class from the <a href="https://docs.flutter.io/flutter/dart-io/dart-io-library.html">dart:io</a> 
library to achieve this.</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="n">Future</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="kd">get</span> <span class="n">_localFile</span> <span class="n">async</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">path</span> <span class="o">=</span> <span class="n">await</span> <span class="n">_localPath</span><span class="o">;</span>
  <span class="k">return</span> <span class="n">File</span><span class="o">(</span><span class="s">'</span><span class="si">$path</span><span class="s">/counter.txt'</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="3-write-data-to-the-file">3. Write data to the file</h2>

<p>Now that we have a <code class="highlighter-rouge">File</code> to work with, we can use it to read and write data! 
First, we’ll write some data to the file. Since we’re working with a counter,
we’ll simply store the integer as a String.</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="n">Future</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="n">writeCounter</span><span class="o">(</span><span class="kt">int</span> <span class="n">counter</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">await</span> <span class="n">_localFile</span><span class="o">;</span>
  
  <span class="c1">// Write the file</span>
  <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">writeAsString</span><span class="o">(</span><span class="s">'</span><span class="si">$counter</span><span class="s">'</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="4-read-data-from-the-file">4. Read data from the file</h2>

<p>Now that we have some data on disk, we can read it! Once again, we’ll use the 
<code class="highlighter-rouge">File</code> class to do so.</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">readCounter</span><span class="o">()</span> <span class="n">async</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">await</span> <span class="n">_localFile</span><span class="o">;</span>

    <span class="c1">// Read the file</span>
    <span class="kt">String</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">await</span> <span class="n">file</span><span class="o">.</span><span class="na">readAsString</span><span class="o">();</span>

    <span class="k">return</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">contents</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// If we encounter an error, return 0</span>
    <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="testing">Testing</h2>

<p>In order to test code that interacts with files, we’ll need to Mock calls to
the <code class="highlighter-rouge">MethodChannel</code>. The <code class="highlighter-rouge">MethodChannel</code> is the class that Flutter uses to
communicate with the host platform.</p>

<p>In our tests, we can’t interact with the filesystem on a device. We’ll need to
interact with our test environment’s filesystem!</p>

<p>To mock the method call, we can provide a <code class="highlighter-rouge">setupAll</code> function in our test file.
This function will run before the tests are executed.</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="n">setUpAll</span><span class="o">(()</span> <span class="n">async</span> <span class="o">{</span>
  <span class="c1">// Create a temporary directory to work with</span>
  <span class="kd">final</span> <span class="n">directory</span> <span class="o">=</span> <span class="n">await</span> <span class="n">Directory</span><span class="o">.</span><span class="na">systemTemp</span><span class="o">.</span><span class="na">createTemp</span><span class="o">();</span>
  
  <span class="c1">// Mock out the MethodChannel for the path_provider plugin</span>
  <span class="kd">const</span> <span class="n">MethodChannel</span><span class="o">(</span><span class="s">'plugins.flutter.io/path_provider'</span><span class="o">)</span>
      <span class="o">.</span><span class="na">setMockMethodCallHandler</span><span class="o">((</span><span class="n">MethodCall</span> <span class="n">methodCall</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="c1">// If we're getting the apps documents directory, return the path to the</span>
    <span class="c1">// temp directory on our test environment instead.</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">methodCall</span><span class="o">.</span><span class="na">method</span> <span class="o">==</span> <span class="s">'getApplicationDocumentsDirectory'</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">directory</span><span class="o">.</span><span class="na">path</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">});</span>
<span class="o">});</span>
</code></pre>
</div>

<h2 id="complete-example">Complete example</h2>

<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'dart:async'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:io'</span><span class="o">;</span>

<span class="kn">import</span> <span class="s">'package:flutter/foundation.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flutter/material.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:path_provider/path_provider.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">runApp</span><span class="o">(</span>
    <span class="n">MaterialApp</span><span class="o">(</span>
      <span class="nl">title:</span> <span class="s">'Reading and Writing Files'</span><span class="o">,</span>
      <span class="nl">home:</span> <span class="n">FlutterDemo</span><span class="o">(</span><span class="nl">storage:</span> <span class="n">CounterStorage</span><span class="o">()),</span>
    <span class="o">),</span>
  <span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">CounterStorage</span> <span class="o">{</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="kd">get</span> <span class="n">_localPath</span> <span class="n">async</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">directory</span> <span class="o">=</span> <span class="n">await</span> <span class="n">getApplicationDocumentsDirectory</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">directory</span><span class="o">.</span><span class="na">path</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="kd">get</span> <span class="n">_localFile</span> <span class="n">async</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">path</span> <span class="o">=</span> <span class="n">await</span> <span class="n">_localPath</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">File</span><span class="o">(</span><span class="s">'</span><span class="si">$path</span><span class="s">/counter.txt'</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">readCounter</span><span class="o">()</span> <span class="n">async</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">await</span> <span class="n">_localFile</span><span class="o">;</span>

      <span class="c1">// Read the file</span>
      <span class="kt">String</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">await</span> <span class="n">file</span><span class="o">.</span><span class="na">readAsString</span><span class="o">();</span>

      <span class="k">return</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">contents</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// If we encounter an error, return 0</span>
      <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="n">writeCounter</span><span class="o">(</span><span class="kt">int</span> <span class="n">counter</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">file</span> <span class="o">=</span> <span class="n">await</span> <span class="n">_localFile</span><span class="o">;</span>

    <span class="c1">// Write the file</span>
    <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="na">writeAsString</span><span class="o">(</span><span class="s">'</span><span class="si">$counter</span><span class="s">'</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">FlutterDemo</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">CounterStorage</span> <span class="n">storage</span><span class="o">;</span>

  <span class="n">FlutterDemo</span><span class="o">({</span><span class="n">Key</span> <span class="n">key</span><span class="o">,</span> <span class="nd">@required</span> <span class="k">this</span><span class="o">.</span><span class="na">storage</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="n">_FlutterDemoState</span> <span class="n">createState</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">_FlutterDemoState</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">_FlutterDemoState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">FlutterDemo</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">_counter</span><span class="o">;</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">initState</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">super</span><span class="o">.</span><span class="na">initState</span><span class="o">();</span>
    <span class="n">widget</span><span class="o">.</span><span class="na">storage</span><span class="o">.</span><span class="na">readCounter</span><span class="o">().</span><span class="na">then</span><span class="o">((</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">setState</span><span class="o">(()</span> <span class="o">{</span>
        <span class="n">_counter</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
      <span class="o">});</span>
    <span class="o">});</span>
  <span class="o">}</span>

  <span class="n">Future</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="n">_incrementCounter</span><span class="o">()</span> <span class="n">async</span> <span class="o">{</span>
    <span class="n">setState</span><span class="o">(()</span> <span class="o">{</span>
      <span class="n">_counter</span><span class="o">++;</span>
    <span class="o">});</span>

    <span class="c1">// write the variable as a string to the file</span>
    <span class="k">return</span> <span class="n">widget</span><span class="o">.</span><span class="na">storage</span><span class="o">.</span><span class="na">writeCounter</span><span class="o">(</span><span class="n">_counter</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="o">(</span>
      <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="o">(</span><span class="nl">title:</span> <span class="n">Text</span><span class="o">(</span><span class="s">'Reading and Writing Files'</span><span class="o">)),</span>
      <span class="nl">body:</span> <span class="n">Center</span><span class="o">(</span>
        <span class="nl">child:</span> <span class="n">Text</span><span class="o">(</span>
          <span class="s">'Button tapped </span><span class="si">$_counter</span><span class="s"> time</span><span class="si">${_counter == 1 ? '' : 's'}</span><span class="s">.'</span><span class="o">,</span>
        <span class="o">),</span>
      <span class="o">),</span>
      <span class="nl">floatingActionButton:</span> <span class="n">FloatingActionButton</span><span class="o">(</span>
        <span class="nl">onPressed:</span> <span class="n">_incrementCounter</span><span class="o">,</span>
        <span class="nl">tooltip:</span> <span class="s">'Increment'</span><span class="o">,</span>
        <span class="nl">child:</span> <span class="n">Icon</span><span class="o">(</span><span class="n">Icons</span><span class="o">.</span><span class="na">add</span><span class="o">),</span>
      <span class="o">),</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

</article>

          </div>
        </div>

        

      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="site-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <div class="logo">
          <img src="/images/flutter-mono-81x100.png" alt="Flutter Logo" width="81" height="100">
        </div>
          <p class="site-footer__link-list">
            <a href="https://groups.google.com/forum/#!forum/flutter-dev">flutter-dev@</a> &bull;
            <a href="https://twitter.com/flutterio">twitter</a> &bull;
            <a href="https://github.com/flutter/">github</a> &bull;
            <a href="/tos">terms</a> &bull;
            <a href="https://www.google.com/intl/en/policies/privacy/">privacy</a> &bull;
            <a href="https://flutter-io.cn">社区中文资源</a>
          </p>

          <p class="licenses">
            Except as otherwise noted,
            this work is licensed under a
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative
            Commons Attribution 4.0 International License</a>,
            and code samples are licensed under the BSD License.
          </p>
      </div>
    </div>
  </div>
</footer>


    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="/js/sidebar_toggle.js"></script>
    <script src="/js/customscripts.js"></script>
    <script src="/js/prism.js"></script>
    <script src="/js/tabs.js"></script>
    <script src="/js/archive.js"></script>
    
    <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=at3ul57xpub2vk3oxt2ytw365i"></script>
  </body>
</html>
