<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Introduction to unit testing  - Flutter </title>
  <link rel="shortcut icon" href="/images/favicon.png">
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-ND4LWWZ');</script>
  <!-- End Google Tag Manager -->

  
  <meta name="description" content="How can we ensure that our apps continue to work as we add more features or change existing functionality? By writing tests!Unit tests are handy for verifying the behavior of a single function, method, or class. The [`test`](https://pub.dartlang.org/packages/test) package provides the core framework for writing unit tests, and the [`flutter_test`](https://docs.flutter.io/flutter/flutter_test/flutter_test-library.html)...">
  <meta name="keywords" content=" ">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@flutterio">

  <meta property="og:title" content="Introduction to unit testing">
  <meta property="og:url" content="https://flutter.io/cookbook/testing/unit-test/">
  <meta property="og:description" content="How can we ensure that our apps continue to work as we add more features or change existing functionality? By writing tests!Unit tests are handy for verifying the behavior of a single function, method, or class. The [`test`](https://pub.dartlang.org/packages/test) package provides the core framework for writing unit tests, and the [`flutter_test`](https://docs.flutter.io/flutter/flutter_test/flutter_test-library.html)...">
  
  <meta property="og:image" content="https://flutter.io/images/flutter-logo-sharing.png">

  <link rel="stylesheet" href="/css/lavish-bootstrap.css">
  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Extended" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro%7CRoboto:500,400italic,300,400" rel="stylesheet">
  
  <link rel="canonical" href="https://flutter.io/cookbook/testing/unit-test/">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-67589403-1', 'auto');
    ga('send', 'pageview');
  </script>

  <meta name="google-site-verification" content="HFqxhSbf9YA_0rBglNLzDiWnrHiK_w4cqDh2YD2GEY4" />
</head>


  <body class="">
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-ND4LWWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


    <div id="overlay-under-drawer"><!-- for the drawer on narrow screens --></div>

    <header class="site-header">
  <div class="container-fluid header-contents">
    <div class="row">
      <div class="col-md-12">
        <i class="fa fa-bars" id="sidebar-toggle-button" aria-hidden="true" style="display:none"></i>
        <img src="/images/flutter-mark-square-100.png" alt="Flutter Logo" width="40" height="40" style="vertical-align:middle">

        <a class="site-title" href="/">Flutter</a>

        <nav class="site-nav">
          <a href="#" class="menu-icon">
            <i class="material-icons-extended">more_vert</i>
          </a>
          <div class="trigger">
            <a class="page-link" href="/docs/">Docs</a>
            <a class="page-link" href="/showcase/">Showcase</a>
            <a class="page-link" href="https://github.com/flutter/flutter">GitHub</a>
            <a class="page-link" href="https://pub.dartlang.org/flutter">Packages</a>
            <a class="page-link" href="/support/">Support</a>
            <form action="/search/" class="nav-searchbox" id="cse-search-box" style="display: inline">
              <input type="hidden" name="cx" value="007067728241810524621:gm6vraqlc8c">
              <input type="hidden" name="ie" value="UTF-8">
              <input type="hidden" name="hl" value="en">
              <input type="search" name="q" id="q" autocomplete="off" placeholder="Search">
            </form>
          </div>
        </nav>
      </div>
    </div> <!-- /.row -->
  </div> <!-- /.container -->
</header>


    <!-- Page Content -->
    <div class="container-fluid contents">
      <!-- Content Row -->
      <div class="row">

        <!-- Sidebar Column -->
        <div id="side-nav-container" class="col-sm-3">
          <ul id="mysidebar" class="nav">

  <li class="sidebar-title">Get started</li>

    <ul class="sidebar-items">
      <li><a href="/get-started/install/">1: Install</a></li>
      <li><a href="/get-started/editor/">2: Configure editor</a></li>
      <li><a href="/get-started/test-drive/">3: Test drive</a></li>
      <li><a href="/get-started/codelab/">4: Write your first app</a></li>
      <li><a href="/get-started/learn-more/">5: Learn more</a></li>
    </ul>

  <li class="sidebar-title">Build UIs</li>

    <ul class="sidebar-items">
      <li><a href="/widgets-intro/">Tour the framework</a></li>
      <li><a href="/widgets/">Widget catalog</a></li>
      <li><a href="/cookbook/">Cookbook</a></li>
      <li><a href="/catalog/samples/">Sample catalog</a></li>
      <li><a href="/codelabs">Codelabs</a></li>
      <li><a href="/tutorials/layout/">Build layouts - Tutorial</a></li>
      <li><a href="/tutorials/interactive/">Add interactivity - Tutorial</a></li>
      <li><a href="/web-analogs/">Flutter for Web devs</a></li>
      <li><a href="/flutter-for-android/">Flutter for Android devs</a></li>
      <li><a href="/flutter-for-ios/">Flutter for iOS devs</a></li>
      <li><a href="/flutter-for-react-native/">Flutter for React Native devs</a></li>
      <li><a href="/flutter-for-xamarin-forms/">Flutter for Xamarin.Forms devs</a></li>
      <li><a href="/gestures/">Gestures</a></li>
      <li><a href="/animations/">Animations</a></li>
      <li><a href="/layout/">Box constraints</a></li>
      <li><a href="/assets-and-images/">Assets and images</a></li>
      <li><a href="/tutorials/internationalization">Internationalization</a></li>
      <li><a href="/accessibility">Accessibility</a></li>
    </ul>

  <li class="sidebar-title">Use device and SDK APIs</li>

    <ul class="sidebar-items">
      <li><a href="/using-packages/">Using packages</a></li>
      <li><a href="/developing-packages/">Developing packages</a></li>
      <li><a href="/platform-channels/">Platform-specific code</a></li>
      <li><a href="/json/">JSON and serialization</a></li>
      
    </ul>

  <li class="sidebar-title">Development and tools</li>

    <ul class="sidebar-items">
      <li><a href="/using-ide/">Using Flutter IDEs</a></li>
      <li><a href="/hot-reload/">Using hot reload</a></li>
      <li><a href="/testing/">Test your app</a></li>
      <li><a href="/debugging/">Debug your app</a></li>
      <li><a href="/ui-performance/">Performance Profiling</a></li>
      <li><a href="/inspector/">Inspect your UI</a></li>
      <li><a href="/android-release/">Build and release for Android</a></li>
      <li><a href="/ios-release/">Build and release for iOS</a></li>
      <li><a href="/fastlane-cd/">Continuous deployment with Fastlane</a></li>
      <li><a href="/upgrading/">Upgrade your Flutter install</a></li>
      <li><a href="/formatting/">Format your source code</a></li>
    </ul>

  <li class="sidebar-title">More details</li>

    <ul class="sidebar-items">
      <li><a href="/faq/">FAQ</a></li>
      <li><a href="/technical-overview">Technical overview</a></li>
      <li><a href="https://docs.google.com/presentation/d/1B3p0kP6NV_XMOimRV09Ms75ymIjU5gr6GGIX74Om_DE/edit?usp=sharing">Magic of Flutter slides</a></li>
      <li><a href="https://docs.google.com/presentation/d/1cw7A4HbvM_Abv320rVgPVGiUP2msVs7tfGbkgdrTy0I/edit?usp=sharing">Architecture diagrams</a></li>
      <li><a href="https://www.youtube.com/watch?v=dkyY9WCGMi0">Framework's layered design <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
      <li><a href="https://www.youtube.com/watch?v=UUfXWzp0-DU">Flutter's rendering pipeline <i class="fa fa-video-camera" aria-hidden="true"></i></a></li>
    </ul>

</ul>

        </div>

        
        

        <!-- Content Column -->
        <div class="col-sm-9 main-contents">
          <div class="main-contents-body">
            <article class="post-content">
  
  
  <header class="post-header">
      <div class="btn-group contribute" role="group">
         <a href="https://github.com/flutter/website/blob/master/cookbook/testing/unit-test.md" class="btn btn-sm">
            <i class="fa fa-pencil"></i> Edit Source
         </a>
         <a href="https://github.com/flutter/flutter/issues/new?title=Issue from website page Introduction to unit testing&body=From URL: https://flutter.io/cookbook/testing/unit-test/&labels=dev: docs - website" class="btn btn-sm">
            <i class="fa fa-github"></i> File Issue
        </a>
     </div>
   <div>
    <h1 class="post-title">Introduction to unit testing </h1>
   </div>

  </header>
  

  <p>How can we ensure that our apps continue to work as we add more features or 
change existing functionality? By writing tests!</p>

<p>Unit tests are handy for verifying the behavior of a single function, method, or 
class. The <a href="https://pub.dartlang.org/packages/test"><code class="highlighter-rouge">test</code></a> package provides the 
core framework for writing unit tests, and the 
<a href="https://docs.flutter.io/flutter/flutter_test/flutter_test-library.html"><code class="highlighter-rouge">flutter_test</code></a> 
package provides additional utilities for testing Widgets.</p>

<p>This recipe demonstrates the core features provided by the <code class="highlighter-rouge">test</code> package. For 
more information about the test package, please see the 
<a href="https://github.com/dart-lang/test/blob/master/README.md">test package documentation</a>.</p>

<h2 id="directions">Directions</h2>

<ol>
  <li>Add the <code class="highlighter-rouge">test</code> or <code class="highlighter-rouge">flutter_test</code> dependency</li>
  <li>Create a test file</li>
  <li>Create a class to test</li>
  <li>Write a <code class="highlighter-rouge">test</code> for our class</li>
  <li>Combine multiple tests in a <code class="highlighter-rouge">group</code></li>
  <li>Run the tests</li>
</ol>

<h2 id="1-add-the-test-dependency">1. Add the test dependency</h2>

<p>If we’re working on a Dart package that does not depend on Flutter, we
can import the <code class="highlighter-rouge">test</code> package. The test package provides the core functionality 
for writing tests in Dart. This is the best approach when writing packages that 
will be consumed by web, server, and Flutter apps.</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">dev_dependencies</span><span class="pi">:</span>
  <span class="s">test</span><span class="pi">:</span> <span class="s">&lt;latest_version&gt;</span>
</code></pre>
</div>

<p>If we’re working on a package that will only be used for Flutter apps, or if 
we need to write Widget tests, we can depend on the <code class="highlighter-rouge">flutter_test</code> package 
instead. It will also include everything from the <code class="highlighter-rouge">test</code> package, as well as
additional utilities for testing Widgets.</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">dev_dependencies</span><span class="pi">:</span>
  <span class="s">flutter_test</span><span class="pi">:</span>
    <span class="s">sdk</span><span class="pi">:</span> <span class="s">flutter</span>
</code></pre>
</div>

<h2 id="2-create-a-test-file">2. Create a test file</h2>

<p>In this example, we’ll create two files: <code class="highlighter-rouge">counter.dart</code> and <code class="highlighter-rouge">counter_test.dart</code>.</p>

<p>The <code class="highlighter-rouge">counter.dart</code> file will contain a class we want to test and will reside in
the <code class="highlighter-rouge">lib</code> folder. The <code class="highlighter-rouge">counter_test.dart</code> file will contain the tests 
themselves and will live inside the <code class="highlighter-rouge">test</code> folder!</p>

<p>In general, test files should reside inside a <code class="highlighter-rouge">test</code> folder located at the root 
of your Flutter application or package.</p>

<p>When we’re finished, our folder structure should look like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>counter_app/
  lib/
    counter.dart
  test/
    counter_test.dart
</code></pre>
</div>

<h2 id="3-create-a-class-to-test">3. Create a class to test</h2>

<p>Next, we’ll need a “unit” to test. Remember: “unit” is a fancy name for a 
function, method or class. In this example, we’ll create a <code class="highlighter-rouge">Counter</code> class 
inside the <code class="highlighter-rouge">lib/counter.dart</code> file. It will be responsible for incrementing and 
decrementing a <code class="highlighter-rouge">value</code> starting at <code class="highlighter-rouge">0</code>.</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Counter</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  
  <span class="kt">void</span> <span class="n">increment</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">value</span><span class="o">++;</span>
  
  <span class="kt">void</span> <span class="n">decrement</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">value</span><span class="o">--;</span> 
<span class="o">}</span>
</code></pre>
</div>

<p><strong>Note:</strong> For simplicity, this tutorial does not follow the “Test Driven 
Development” approach. If you’re more comfortable with that style of 
development, you can always go that route!</p>

<h2 id="4-write-a-test-for-our-class">4. Write a test for our class</h2>

<p>Inside the <code class="highlighter-rouge">counter_test.dart</code> file, we can write our first unit test! Tests are 
defined using the top-level <code class="highlighter-rouge">test</code> function, and we can check if the results are 
correct by using the top-level <code class="highlighter-rouge">expect</code> function. Both of these functions come
from the <code class="highlighter-rouge">test</code> package.</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="c1">// Import the test package and Counter class</span>
<span class="kn">import</span> <span class="s">'package:test/test.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:counter_app/counter.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">test</span><span class="o">(</span><span class="s">'Counter value should be incremented'</span><span class="o">,</span> <span class="o">()</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">();</span>
    
    <span class="n">counter</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
    
    <span class="n">expect</span><span class="o">(</span><span class="n">counter</span><span class="o">.</span><span class="na">value</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="5-combine-multiple-tests-in-a-group">5. Combine multiple tests in a <code class="highlighter-rouge">group</code></h2>

<p>If we have several tests which are related to one another, it can be handy
to combine them using the <code class="highlighter-rouge">group</code> function provided by the <code class="highlighter-rouge">test</code> package.</p>

<!-- skip -->
<div class="language-dart highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'package:test/test.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:counter_app/counter.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">group</span><span class="o">(</span><span class="s">'Counter'</span><span class="o">,</span> <span class="o">()</span> <span class="o">{</span>
    <span class="n">test</span><span class="o">(</span><span class="s">'value should start at 0'</span><span class="o">,</span> <span class="o">()</span> <span class="o">{</span>
      <span class="n">expect</span><span class="o">(</span><span class="n">Counter</span><span class="o">().</span><span class="na">value</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">});</span>
    
    <span class="n">test</span><span class="o">(</span><span class="s">'value should be incremented'</span><span class="o">,</span> <span class="o">()</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">();</span>
        
      <span class="n">counter</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>
        
      <span class="n">expect</span><span class="o">(</span><span class="n">counter</span><span class="o">.</span><span class="na">value</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
    <span class="o">});</span>
    
    <span class="n">test</span><span class="o">(</span><span class="s">'value should be decremented'</span><span class="o">,</span> <span class="o">()</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">();</span>
        
      <span class="n">counter</span><span class="o">.</span><span class="na">decrement</span><span class="o">();</span>
        
      <span class="n">expect</span><span class="o">(</span><span class="n">counter</span><span class="o">.</span><span class="na">value</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">});</span>
<span class="o">}</span>
</code></pre>
</div>

<h3 id="6-run-the-tests">6. Run the tests</h3>

<p>Now that we have a <code class="highlighter-rouge">Counter</code> class with tests in place, we can run the tests!</p>

<h4 id="run-tests-using-intellij-or-vscode">Run tests using IntelliJ or VSCode</h4>

<p>The Flutter plugins for IntelliJ and VSCode support running tests. This is often
the best option while writing tests because it provides the fastest feedback 
loop as well as the ability to set breakpoints.</p>

<ul>
  <li><strong>IntelliJ</strong>
    <ol>
      <li>Open the <code class="highlighter-rouge">counter_test.dart</code> file</li>
      <li>Select the <code class="highlighter-rouge">Run</code> menu</li>
      <li>Click the <code class="highlighter-rouge">Run 'tests in counter_test.dart'</code> option</li>
      <li><em>Alternatively, use the appropriate keyboard shortcut for your platform!</em></li>
    </ol>
  </li>
  <li><strong>VSCode</strong>
    <ol>
      <li>Open the <code class="highlighter-rouge">counter_test.dart</code> file</li>
      <li>Select the <code class="highlighter-rouge">Debug</code> menu</li>
      <li>Click the <code class="highlighter-rouge">Start Debugging</code> option</li>
      <li><em>Alternatively, use the appropriate keyboard shortcut for your platform!</em></li>
    </ol>
  </li>
</ul>

<h4 id="run-tests-in-a-terminal">Run tests in a terminal</h4>

<p>We can also use a terminal to run our tests by executing the following
command from the root of the project:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>flutter test test/counter_test.dart
</code></pre>
</div>

</article>

          </div>
        </div>

        

      </div> <!-- /.row -->
    </div> <!-- /.container -->

    <footer class="site-footer">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <div class="logo">
          <img src="/images/flutter-mono-81x100.png" alt="Flutter Logo" width="81" height="100">
        </div>
          <p class="site-footer__link-list">
            <a href="https://groups.google.com/forum/#!forum/flutter-dev">flutter-dev@</a> &bull;
            <a href="https://twitter.com/flutterio">twitter</a> &bull;
            <a href="https://github.com/flutter/">github</a> &bull;
            <a href="/tos">terms</a> &bull;
            <a href="https://www.google.com/intl/en/policies/privacy/">privacy</a> &bull;
            <a href="https://flutter-io.cn">社区中文资源</a>
          </p>

          <p class="licenses">
            Except as otherwise noted,
            this work is licensed under a
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative
            Commons Attribution 4.0 International License</a>,
            and code samples are licensed under the BSD License.
          </p>
      </div>
    </div>
  </div>
</footer>


    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="/js/sidebar_toggle.js"></script>
    <script src="/js/customscripts.js"></script>
    <script src="/js/prism.js"></script>
    <script src="/js/tabs.js"></script>
    <script src="/js/archive.js"></script>
    
    <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=at3ul57xpub2vk3oxt2ytw365i"></script>
  </body>
</html>
